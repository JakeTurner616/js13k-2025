// src/tileset/tilemap.ts

const TILE_ATLAS_SRC = "data:image/png;base64,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"; // your full base64 atlas here
const TILE_SIZE = 32;
const ATLAS_COLS = 12;

let tileImage = new Image();
let isLoaded = false;

tileImage.onload = () => {
  isLoaded = true;
};

tileImage.src = TILE_ATLAS_SRC;

export function drawTile(
  ctx: CanvasRenderingContext2D,
  index: number,
  dx: number,
  dy: number
) {
  if (!isLoaded || index < 0) return;

  const sx = (index % ATLAS_COLS) * TILE_SIZE;
  const sy = Math.floor(index / ATLAS_COLS) * TILE_SIZE;

  ctx.drawImage(tileImage, sx, sy, TILE_SIZE, TILE_SIZE, dx, dy, TILE_SIZE, TILE_SIZE);
}

export function isTileAtlasReady() {
  return isLoaded;
}
